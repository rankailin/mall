(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-386a7ece"],{"0bea":function(t,e,n){},"25a2":function(t,e,n){"use strict";n("0bea")},"2d3b":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search-wrap"},[n("div",{staticClass:"search-head"},[n("van-icon",{staticClass:"go-back",attrs:{name:"arrow-left"},on:{touchend:function(e){return t.$router.goBack()}}}),n("van-search",{staticClass:"search-dom",attrs:{placeholder:t.word,"show-action":""},on:{search:t.onSearch,input:t.onInput,focus:t.onFocus},scopedSlots:t._u([t.showList?{key:"action",fn:function(){return[n("span",{on:{touchend:function(e){return t.onSearch(t.value)}}},[t._v("搜索")])]},proxy:!0}:{key:"action",fn:function(){return[n("van-icon",{staticClass:"shop-cart",attrs:{id:"shop-cart",name:"cart-o",color:"#ff1a90",badge:t.badge},on:{touchend:function(e){return t.$router.push({name:"Cart"})}}})]},proxy:!0}],null,!0),model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),t.likeWordList.length&&t.showList?n("div",{staticClass:"like-list"},[n("van-list",t._l(t.likeWordList,(function(e){return n("van-cell",{key:e,on:{click:function(n){return t.onSearch(e)}}},[[n("span",{staticClass:"custom-title",domProps:{innerHTML:t._s(t.formatHTML(e))}})]],2)})),1)],1):t._e(),t.likeWordList.length<=0&&t.showList?n("div",{staticClass:"history"},[n("my-history",{attrs:{historyList:t.searchList},on:{onSearch:t.onSearch}})],1):t._e(),t.showList?t._e():n("div",{staticClass:"goods-list"},[n("van-list",{attrs:{finished:t.finished,"immediate-check":!1,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.goodsList,(function(e){return n("div",{key:e.id},[n("list",{attrs:{item:e,goodsObj:t.counteMap}})],1)})),0)],1)])},r=[],s=(n("99af"),n("7db0"),n("13d5"),n("07ac"),n("4d63"),n("ac1f"),n("25f0"),n("5319"),n("9767"),n("5530")),o=n("2909"),a=(n("96cf"),n("1da1")),c=n("2e90"),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"my-history"},[n("h4",{staticClass:"title"},[t._v("历史搜索")]),n("ul",{staticClass:"history"},t._l(t.historyList,(function(e){return n("li",{key:e.time,staticClass:"history-item overflow-text",on:{click:function(n){return t.onSearch(e.value)}}},[t._v(t._s(e.value))])})),0)])},l=[],f={props:{historyList:{default:function(){return[]}}},methods:{onSearch:function(t){console.log(t),this.$emit("onSearch",t)}}},d=f,h=(n("25a2"),n("2877")),g=Object(h["a"])(d,u,l,!1,null,"6beefdee",null),v=g.exports,p=n("2f62"),m={components:{List:c["a"],MyHistory:v},data:function(){return{word:"酒",value:this.word,showList:!0,likeWordList:[],timer:null,page:1,size:6,loading:!1,finished:!1,isloading:!1,goodsList:[],total:0,searchList:[]}},created:function(){this.searchList=JSON.parse(localStorage.getItem("searchList"))||[]},methods:{onLoad:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.getSerachWord(t.value,t.page,t.size);case 2:n=e.sent,i=n.total,r=n.list,t.goodsList=[].concat(Object(o["a"])(t.goodsList),Object(o["a"])(r)),console.log(i,r,t.goodsList),t.total=i,t.loading=!1,t.goodsList.length>=t.total?t.finished=!0:t.page+=1;case 10:case"end":return e.stop()}}),e)})))()},formatHTML:function(t){var e=new RegExp(this.value,"g");return t.replace(e,this.value.fontcolor("#ff1a90"))},onSearch:function(t){var e=this;this.value=t||this.word;var n=this.searchList.find((function(t){return t.value===e.value}));n?(n.time=(new Date).getTime(),this.searchList.sort((function(t,e){return e.time-t.time}))):(this.searchList.unshift({value:this.value,time:(new Date).getTime()}),this.searchList.length>13&&this.searchList.pop()),localStorage.setItem("searchList",JSON.stringify(this.searchList)),this.likeWordList=[],this.goodsList=[],this.page=1,this.finished=!1,this.onLoad(),this.showList=!1},onInput:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.showList=!0,""!==t.value){e.next=4;break}return t.likeWordList=[],e.abrupt("return");case 4:t.timer?(clearTimeout(t.timer),t.timer=null):t.timer=setTimeout(Object(a["a"])(regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.getLikeSearchList(t.value);case 2:n=e.sent,i=n.result,t.likeWordList=i,console.log(t.likeWordList),clearTimeout(t.timer),t.timer=null;case 8:case"end":return e.stop()}}),e)}))),300);case 5:case"end":return e.stop()}}),e)})))()},onFocus:function(){this.showList=!0}},computed:Object(s["a"])(Object(s["a"])({},Object(p["d"])({counteMap:function(t){return t.counteMap}})),{},{badge:function(){var t=Object.values(this.counteMap).reduce((function(t,e){return t+e}),0);return console.log(t),0===t?"":t>99?"99+":t}})},b=m,y=(n("3bb8"),Object(h["a"])(b,i,r,!1,null,"f97ce4f8",null));e["default"]=y.exports},"2e90":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"goods-info van-hairline--bottom"},[n("div",{staticClass:"img-wrapper"},[n("img",{ref:"img",attrs:{src:t.item.images[0]}})]),n("ul",{staticClass:"info"},[n("li",{staticClass:"title overflow-text"},[t._v(t._s(t.item.title))]),n("li",{staticClass:"desc overflow-text"},[t._v(t._s(t.item.desc))]),n("li",{staticClass:"tags"},t._l(t.item.tags,(function(e){return n("span",{key:e},[t._v(t._s(e))])})),0),n("li",{staticClass:"price"},[n("div",{staticClass:"price-item"},[n("span",{staticClass:"price-num"},[t._v("¥"+t._s(t.item.price))]),n("span",{staticClass:"goods-num"},[t.goodsObj[t.item.id]>0?n("p",{on:{touchend:function(e){return t.counter(t.item.id,-1)}}},[n("img",{attrs:{src:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/rec.png"}})]):t._e(),t.goodsObj[t.item.id]>0?n("p",[t._v(t._s(t.goodsObj[t.item.id]))]):t._e(),n("p",{on:{touchend:function(e){return t.counter(t.item.id,1)}}},[n("img",{attrs:{src:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/add.png"}})])])])])])])},r=[],s=n("5530"),o=n("2f62"),a=n("a026"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.exist?n("div",{staticClass:"item",style:{width:t.width+"px",height:t.height+"px",opacity:t.opacity,transform:"translate("+t.moveX+"px,\n  "+t.moveY+"px) scale("+t.sx+", "+t.sy+")"}},[n("img",{attrs:{src:t.src}})]):t._e()},u=[],l={},f=l,d=(n("4972"),n("2877")),h=Object(d["a"])(f,c,u,!1,null,"49e12b06",null),g=h.exports,v=a["a"].extend(g),p=function(t){var e=t.startX,n=t.startY,i=t.endX,r=t.endY,s=t.src,o=t.width,a=t.height,c=new v({el:document.createElement("div"),data:function(){return{moveX:e,moveY:n,sx:1,sy:1,opacity:1,exist:!0,src:s,width:o,height:a}}});document.body.appendChild(c.$el),setTimeout((function(){c.moveX=i,c.moveY=r,c.sx=.1,c.sy=.1,c.opacity=0}),0),setTimeout((function(){c.exist=!1}),1e3)},m={props:["item","goodsObj","nofly"],methods:Object(s["a"])(Object(s["a"])({},Object(o["c"])(["storageChange"])),{},{counter:function(t,e){if(this.storageChange({id:t,value:e}),-1!==e&&(console.log(this.nofly),!this.nofly)){var n=this.$refs.img.getBoundingClientRect(),i=n.left,r=n.top,s=this.$refs.img,o=s.offsetWidth,a=s.offsetHeight,c=document.getElementById("shop-cart"),u=c.getBoundingClientRect(),l=u.top,f=u.left,d=c.offsetWidth,h=c.offsetHeight,g=f+d/2,v=l+h/2;console.log(i,r,l,f),p({startX:i,startY:r,endX:g,endY:v,src:this.$refs.img.src,width:o,height:a})}}})},b=m,y=(n("a4d4"),Object(d["a"])(b,i,r,!1,null,"00bdffbe",null));e["a"]=y.exports},"3bb8":function(t,e,n){"use strict";n("7584")},"44e7":function(t,e,n){var i=n("861d"),r=n("c6b6"),s=n("b622"),o=s("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==r(t))}},4972:function(t,e,n){"use strict";n("e153")},"4d63":function(t,e,n){var i=n("83ab"),r=n("da84"),s=n("94ca"),o=n("7156"),a=n("9bf2").f,c=n("241c").f,u=n("44e7"),l=n("ad6d"),f=n("9f7f"),d=n("6eeb"),h=n("d039"),g=n("69f3").set,v=n("2626"),p=n("b622"),m=p("match"),b=r.RegExp,y=b.prototype,w=/a/g,L=/a/g,x=new b(w)!==w,_=f.UNSUPPORTED_Y,k=i&&s("RegExp",!x||_||h((function(){return L[m]=!1,b(w)!=w||b(L)==L||"/a/i"!=b(w,"i")})));if(k){var C=function(t,e){var n,i=this instanceof C,r=u(t),s=void 0===e;if(!i&&r&&t.constructor===C&&s)return t;x?r&&!s&&(t=t.source):t instanceof C&&(s&&(e=l.call(t)),t=t.source),_&&(n=!!e&&e.indexOf("y")>-1,n&&(e=e.replace(/y/g,"")));var a=o(x?new b(t,e):b(t,e),i?this:y,C);return _&&n&&g(a,{sticky:n}),a},S=function(t){t in C||a(C,t,{configurable:!0,get:function(){return b[t]},set:function(e){b[t]=e}})},O=c(b),E=0;while(O.length>E)S(O[E++]);y.constructor=C,C.prototype=y,d(r,"RegExp",C)}v("RegExp")},5319:function(t,e,n){"use strict";var i=n("d784"),r=n("825a"),s=n("7b0b"),o=n("50c4"),a=n("a691"),c=n("1d80"),u=n("8aa5"),l=n("14c3"),f=Math.max,d=Math.min,h=Math.floor,g=/\$([$&'`]|\d\d?|<[^>]*>)/g,v=/\$([$&'`]|\d\d?)/g,p=function(t){return void 0===t?t:String(t)};i("replace",2,(function(t,e,n,i){var m=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,b=i.REPLACE_KEEPS_$0,y=m?"$":"$0";return[function(n,i){var r=c(this),s=void 0==n?void 0:n[t];return void 0!==s?s.call(n,r,i):e.call(String(r),n,i)},function(t,i){if(!m&&b||"string"===typeof i&&-1===i.indexOf(y)){var s=n(e,t,this,i);if(s.done)return s.value}var c=r(t),h=String(this),g="function"===typeof i;g||(i=String(i));var v=c.global;if(v){var L=c.unicode;c.lastIndex=0}var x=[];while(1){var _=l(c,h);if(null===_)break;if(x.push(_),!v)break;var k=String(_[0]);""===k&&(c.lastIndex=u(h,o(c.lastIndex),L))}for(var C="",S=0,O=0;O<x.length;O++){_=x[O];for(var E=String(_[0]),j=f(d(a(_.index),h.length),0),$=[],R=1;R<_.length;R++)$.push(p(_[R]));var T=_.groups;if(g){var M=[E].concat($,j,h);void 0!==T&&M.push(T);var W=String(i.apply(void 0,M))}else W=w(E,h,j,$,T,i);j>=S&&(C+=h.slice(S,j)+W,S=j+E.length)}return C+h.slice(S)}];function w(t,n,i,r,o,a){var c=i+t.length,u=r.length,l=v;return void 0!==o&&(o=s(o),l=g),e.call(a,l,(function(e,s){var a;switch(s.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,i);case"'":return n.slice(c);case"<":a=o[s.slice(1,-1)];break;default:var l=+s;if(0===l)return e;if(l>u){var f=h(l/10);return 0===f?e:f<=u?void 0===r[f-1]?s.charAt(1):r[f-1]+s.charAt(1):e}a=r[l-1]}return void 0===a?"":a}))}}))},7156:function(t,e,n){var i=n("861d"),r=n("d2bb");t.exports=function(t,e,n){var s,o;return r&&"function"==typeof(s=e.constructor)&&s!==n&&i(o=s.prototype)&&o!==n.prototype&&r(t,o),t}},7584:function(t,e,n){},"7db0":function(t,e,n){"use strict";var i=n("23e7"),r=n("b727").find,s=n("44d2"),o=n("ae40"),a="find",c=!0,u=o(a);a in[]&&Array(1)[a]((function(){c=!1})),i({target:"Array",proto:!0,forced:c||!u},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),s(a)},"857a":function(t,e,n){var i=n("1d80"),r=/"/g;t.exports=function(t,e,n,s){var o=String(i(t)),a="<"+e;return""!==n&&(a+=" "+n+'="'+String(s).replace(r,"&quot;")+'"'),a+">"+o+"</"+e+">"}},"8aa5":function(t,e,n){"use strict";var i=n("6547").charAt;t.exports=function(t,e,n){return e+(n?i(t,e).length:1)}},9767:function(t,e,n){"use strict";var i=n("23e7"),r=n("857a"),s=n("af03");i({target:"String",proto:!0,forced:s("fontcolor")},{fontcolor:function(t){return r(this,"font","color",t)}})},a162:function(t,e,n){},a4d4:function(t,e,n){"use strict";n("a162")},af03:function(t,e,n){var i=n("d039");t.exports=function(t){return i((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},e153:function(t,e,n){}}]);
//# sourceMappingURL=chunk-386a7ece.f04e5675.js.map